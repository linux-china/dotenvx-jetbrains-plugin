<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<!--suppress PluginXmlI18n -->
<idea-plugin>
    <id>dotenvx</id>
    <name>Dotenvx</name>
    <vendor email="libing.chen@gmail.com">linux-china</vendor>

    <depends>com.intellij.modules.platform</depends>
    <resource-bundle>messages.DotenvxBundle</resource-bundle>
    <depends optional="true" config-file="dotenvx-goland.xml">org.jetbrains.plugins.go</depends>
    <depends optional="true" config-file="dotenvx-with-properties.xml">com.intellij.properties</depends>
    <depends optional="true" config-file="dotenvx-with-toml.xml">org.toml.lang</depends>
    <depends optional="true" config-file="dotenvx-idea.xml">com.intellij.java</depends>
    <depends optional="true" config-file="dotenvx-nodejs.xml">NodeJS</depends>
    <depends optional="true" config-file="dotenvx-python.xml">com.intellij.modules.python</depends>
    <depends optional="true" config-file="dotenvx-phpstorm.xml">com.jetbrains.php</depends>
    <depends optional="true" config-file="dotenvx-rubymine.xml">org.jetbrains.plugins.ruby</depends>
    <depends optional="true" config-file="dotenvx-terminal.xml">org.jetbrains.plugins.terminal</depends>

    <depends>ru.adelf.idea.dotenv</depends>

    <extensions defaultExtensionNs="com.intellij">
        <codeInsight.declarativeInlayProvider language="DotEnv"
                                              implementationClass="com.github.linuxchina.dotenvx.hints.DotenvxEnvInlayHintsProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="dotenvx.implicit.dotenv"
                                              bundle="messages.DotenvxBundle"
                                              descriptionKey="dotenvx.inlay.description"
                                              nameKey="dotenvx.implicit.value.inlay.provider.name"/>
        <codeInsight.declarativeInlayProvider language="yaml"
                                              implementationClass="com.github.linuxchina.dotenvx.hints.DotenvxYamlInlayHintsProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="dotenvx.implicit.yaml"
                                              bundle="messages.DotenvxBundle"
                                              descriptionKey="dotenvx.inlay.description"
                                              nameKey="dotenvx.implicit.value.inlay.provider.name"/>
        <codeInsight.declarativeInlayProvider language="XML"
                                              implementationClass="com.github.linuxchina.dotenvx.hints.DotenvxXmlInlayHintsProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="dotenvx.implicit.xml"
                                              bundle="messages.DotenvxBundle"
                                              descriptionKey="dotenvx.inlay.description"
                                              nameKey="dotenvx.implicit.value.inlay.provider.name"/>
        <codeInsight.declarativeInlayProvider language="JSON"
                                              implementationClass="com.github.linuxchina.dotenvx.hints.DotenvxJsonInlayHintsProvider"
                                              isEnabledByDefault="true"
                                              group="VALUES_GROUP"
                                              providerId="dotenvx.implicit.json"
                                              bundle="messages.DotenvxBundle"
                                              descriptionKey="dotenvx.inlay.description"
                                              nameKey="dotenvx.implicit.value.inlay.provider.name"/>
        <codeInsight.lineMarkerProvider language="DotEnv"
                                        implementationClass="com.github.linuxchina.dotenvx.marker.EnvFileLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="yaml"
                                        implementationClass="com.github.linuxchina.dotenvx.marker.YamlFileLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JSON"
                                        implementationClass="com.github.linuxchina.dotenvx.marker.JsonFileLineMarkerProvider"/>

        <annotator language="DotEnv"
                   implementationClass="com.github.linuxchina.dotenvx.highlight.EnvFileHighlighterAnnotator"/>
        <annotator language="yaml"
                   implementationClass="com.github.linuxchina.dotenvx.highlight.YamlFileHighlighterAnnotator"/>

        <copyPastePreProcessor implementation="com.github.linuxchina.dotenvx.processor.PasteEncryptPreProcessor"/>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EncryptEnvValueIntention</className>
            <category>Dotenvx</category>
            <language>DotEnv</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EncryptYamlValueIntention</className>
            <category>Dotenvx</category>
            <language>yaml</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EditEnvValueIntention</className>
            <category>Dotenvx</category>
            <language>DotEnv</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EditXmlValueIntention</className>
            <category>Dotenvx</category>
            <language>XML</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EncryptXmlValueIntention</className>
            <category>Dotenvx</category>
            <language>XML</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EditYamlValueIntention</className>
            <category>Dotenvx</category>
            <language>yaml</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EditJsonValueIntention</className>
            <category>Dotenvx</category>
            <language>JSON</language>
        </intentionAction>
        <intentionAction>
            <className>com.github.linuxchina.dotenvx.intentions.EncryptJsonValueIntention</className>
            <category>Dotenvx</category>
            <language>JSON</language>
        </intentionAction>
        <localInspection language="DotEnv"
                         shortName="EnvFileSensitiveValueInspection"
                         displayName="Sensitive value is not encrypted"
                         groupPath="Dotenvx"
                         enabledByDefault="true"
                         implementationClass="com.github.linuxchina.dotenvx.inspections.EnvSensitiveValueInspection"
                         groupName="Dotenvx"
                         bundle="messages.DotenvxBundle"/>
    </extensions>

    <actions>
        <action id="dotenvx.AddKeyValue"
                class="com.github.linuxchina.dotenvx.actions.AddKeyValueAction"
                icon="/icons/key-value.svg"
                text="Add Encrypted Variable"
                description="Add encrypted variable to the end of file">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="dotenvx.AddEncryptedValue"
                class="com.github.linuxchina.dotenvx.actions.AddEncryptedValueAction"
                icon="/icons/key-value.svg"
                text="Add Encrypted Value"
                description="Add encrypted value at caret">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="dotenvx.InsertPublicKey"
                class="com.github.linuxchina.dotenvx.actions.InsertPublicKeyAction"
                icon="/icons/key.svg"
                text="Insert Public Key"
                description="Insert public key at the head of the file if missing">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="dotenvx.NewDotenvxFile"
                class="com.github.linuxchina.dotenvx.actions.NewDotenvxFileAction"
                icon="/icons/key.svg"
                text="Dotenvx File..."
                description="Create an .env/properties file by Dotenvx">
            <add-to-group group-id="NewGroup" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
